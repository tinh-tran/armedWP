(function(a){var d=a("body"),m=a(yith_wcms.dom.login),u=a(yith_wcms.dom.billing),v=a(yith_wcms.dom.shipping),n=a(yith_wcms.dom.order),p=a(yith_wcms.dom.payment),e=a(yith_wcms.dom.form_actions),w=a(yith_wcms.dom.coupon),x=a(yith_wcms.dom.create_account),A=a(yith_wcms.dom.create_account_wrapper),q=[m,u,v,n,p],t=d.hasClass("logged-in");d.on("updated_checkout yith_wcms_myaccount_order_pay",function(c){"updated_checkout"==c.type&&(q[4]=a(yith_wcms.dom.payment));4==e.data("step")&&a(yith_wcms.dom.payment).show();
    d.trigger("yith_wcms_updated_checkout")});d.hasClass("woocommerce-order-pay")&&d.trigger("yith_wcms_myaccount_order_pay");d.on("yith_wcms_select2",function(c){if(a().select2){var b=function(){a("select.country_select, select.state_select").each(function(){var b={placeholder:a(this).attr("placeholder"),placeholderOption:"first",width:"100%"};a(this).select2(b)})};b();d.bind("country_to_state_changed",function(){b()})}});1!=yith_wcms.wc_shipping_multiple&&d.trigger("yith_wcms_select2");a(".yith-wcms-pro "+
    yith_wcms.dom.checkout_timeline+" li").on("click",function(c){var b=a(this);if(b.hasClass("active"))return!1;c=a(yith_wcms.dom.checkout_timeline).find(yith_wcms.dom.active_timeline).data("step");var h=b.data("step"),d=b.data("step")>c?h-1:b.data("step"),b=b.data("step")>c?e.find(yith_wcms.dom.button_next):e.find(yith_wcms.dom.button_prev);if(0==h&&t)return!1;y(b,c,h,d)});e.find(yith_wcms.dom.button_prev).add(yith_wcms.dom.button_next).on("click",function(c){c=a(this);var b=e.data("step");y(c,b,b+
    1,b-1)});var y=function(c,b,h,d){var f=a(yith_wcms.dom.checkout_timeline);c=c.data("action");var k=e.find(yith_wcms.dom.button_prev),g=e.find(yith_wcms.dom.button_next),l=f.find(".active").data("step"),m=function(a){3==a?w.fadeIn(yith_wcms.transition_duration):w.fadeOut(yith_wcms.transition_duration)};"prev"==c&&1==b?g.val(yith_wcms.skip_login_label):g.val(yith_wcms.next_label);if("yes"==yith_wcms.live_fields_validation&&(0==l||1==l||2==l)&&"next"==c){var n=a(yith_wcms.dom.checkout_form),r=0,p=a(yith_wcms.dom.shipping_check);
    n.find(yith_wcms.dom.required_fields_check).trigger("blur");1==l||0==l?(r=u.find(yith_wcms.dom.wc_invalid_required).size(),0==x.length||x.is(":checked")||0==r||(r-=A.find(".validate-required").length)):2==l&&p.is(":checked")&&(r=v.find(yith_wcms.dom.wc_invalid_required).size());if(0!=r){if(0!=l)return;h=1}}f.find(".active").removeClass("active");"next"==c?(e.data("step",h),q[b].fadeOut(yith_wcms.transition_duration,function(){q[h].fadeIn(yith_wcms.transition_duration);m(h)}),a(yith_wcms.dom.timeline_id_prefix+
    h).toggleClass("active")):"prev"==c&&(e.data("step",d),q[b].fadeOut(yith_wcms.transition_duration,function(){q[d].fadeIn(yith_wcms.transition_duration)}),m(d),a(yith_wcms.dom.timeline_id_prefix+d).toggleClass("active"));b=e.data("step");1==yith_wcms.use_cookie&&a.cookie("yith_wcms_checkout_current_step",b,{path:"/"});1==b&&1==t||0==t&&(0==b&&1==yith_wcms.checkout_login_reminder_enabled||1==b&&0==yith_wcms.checkout_login_reminder_enabled)?k.fadeOut(yith_wcms.transition_duration):k.fadeIn(yith_wcms.transition_duration);
    4==b?(g.fadeOut(yith_wcms.transition_duration),"yes"==yith_wcms.disabled_prev_button&&k.fadeOut(yith_wcms.transition_duration)):g.fadeIn(yith_wcms.transition_duration)},m=a.cookie("yith_wcms_checkout_form"),n=a.cookie("yith_wcms_checkout_current_step"),z=function(){a(yith_wcms.dom.checkout_form).find(yith_wcms.dom.required_fields_check).on("blur change",function(c){c=a(".checkout.woocommerce-checkout").serialize();a.cookie("yith_wcms_checkout_form",c,{path:"/"})})},p=function(c,b){if("undefined"!=
    typeof c){var d=c.split("&"),e;for(e in d){var f=d[e].split("="),k=a(decodeURIComponent('input[name="'+f[0]+'"]'));if("undefined"!=typeof k){var g=decodeURIComponent(f[1]).replace(/\+/g," ");-1!=yith_wcms.dom.select2_fields.indexOf(f[0])?(f=a("#"+decodeURIComponent(f[0])),f.add(k).val(g),f.is("select")?f.val(g).trigger("change"):f.is("input")&&k.val(g)):-1==f[0].indexOf("_wp")&&g&&k.val(g)}}}};1==yith_wcms.use_cookie&&(z(),p(m,n),d.on("country_to_state_changed",function(a,b,d){z()}));if("undefined"!=
    typeof a.cookie("yith_wcms_checkout_current_step")&&1==yith_wcms.use_cookie)d.on("updated_checkout yith_wcms_myaccount_order_pay",function(){a(".yith-wcms-pro "+yith_wcms.dom.checkout_timeline+" li#timeline-"+a.cookie("yith_wcms_checkout_current_step")).trigger("click")});1==yith_wcms.is_order_received_endpoint&&1==yith_wcms.use_cookie&&(a.removeCookie("yith_wcms_checkout_form",{path:"/"}),a.removeCookie("yith_wcms_checkout_current_step",{path:"/"}))})(jQuery);